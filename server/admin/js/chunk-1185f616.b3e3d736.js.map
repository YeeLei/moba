{"version":3,"sources":["webpack:///./src/views/system/CateEdit.vue?019c","webpack:///./src/api/system.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/system/CateEdit.vue?593f","webpack:///src/views/system/CateEdit.vue","webpack:///./src/views/system/CateEdit.vue?c409","webpack:///./src/views/system/CateEdit.vue"],"names":["saveCate","data","request","url","method","updateCate","deleteCate","params","fetchCateOne","fetchCateTwo","fetchCateItem","saveAds","updateAds","deleteAds","fetchAds","fetchAdsItem","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","id","model","value","callback","$$v","$set","expression","editFlag","_l","item","key","_id","name","nativeOn","$event","type","indexOf","_k","keyCode","save","on","staticRenderFns","props","parent","level","watch","$route","fetchItem","mounted","fetchOne","methods","component"],"mappings":"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","file":"js/chunk-1185f616.b3e3d736.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CateEdit.vue?vue&type=style&index=0&id=478731bf&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CateEdit.vue?vue&type=style&index=0&id=478731bf&lang=stylus&scoped=true&\"","import request from '@/utils/request'\n\n// 添加分类\nexport function saveCate (data) {\n  return request({\n    url: '/categories/add',\n    method: 'post',\n    data\n  })\n}\n\n// 修改分类\nexport function updateCate (data) {\n  return request({\n    url: '/categories/update',\n    method: 'put',\n    data\n  })\n}\n\n// 删除分类\nexport function deleteCate (params) {\n  return request({\n    url: '/categories/delete',\n    method: 'delete',\n    params\n  })\n}\n\n// 查询一级分类\nexport function fetchCateOne (params) {\n  return request({\n    url: '/categories/levelOne',\n    method: 'get',\n    params\n  })\n}\n\n// 查询二级分类\nexport function fetchCateTwo (params) {\n  return request({\n    url: '/categories/levelTwo',\n    method: 'get',\n    params\n  })\n}\n\n// 查询要编辑的分类信息\nexport function fetchCateItem (params) {\n  return request({\n    url: '/categories/item',\n    method: 'get',\n    params\n  })\n}\n\n// ----添加广告位----\nexport function saveAds (data) {\n  return request({\n    url: '/ads/add',\n    method: 'post',\n    data\n  })\n}\n\n// 修改广告位\nexport function updateAds (data) {\n  return request({\n    url: '/ads/update',\n    method: 'put',\n    data\n  })\n}\n\n// 删除广告位\nexport function deleteAds (params) {\n  return request({\n    url: '/ads/delete',\n    method: 'delete',\n    params\n  })\n}\n\n// 获取广告位列表\nexport function fetchAds (params) {\n  return request({\n    url: '/ads/list',\n    method: 'get',\n    params\n  })  \n}\n\n// 查询要编辑的广告位信息\nexport function fetchAdsItem (params) {\n  return request({\n    url: '/ads/item',\n    method: 'get',\n    params\n  })\n}\n\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"cate-edit\"}},[_c('el-card',{staticClass:\"box-card\"},[_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.id ? '编辑' : '新建')+\"分类\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.model.parent),callback:function ($$v) {_vm.$set(_vm.model, \"parent\", $$v)},expression:\"model.parent\"}},[_c('el-option',{attrs:{\"label\":\"无上级分类\",\"value\":\"\",\"disabled\":_vm.id && !_vm.editFlag}}),_vm._l((_vm.level),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.name,\"value\":item._id,\"disabled\":_vm.id && _vm.editFlag}})})],2),_c('el-input',{attrs:{\"placeholder\":\"请输入分类名称\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save($event)}},model:{value:(_vm.model.name),callback:function ($$v) {_vm.$set(_vm.model, \"name\", $$v)},expression:\"model.name\"}}),_c('div',{staticClass:\"save\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"cate-edit\">\n    <el-card class=\"box-card\">\n      <h1 class=\"title\">{{ id ? '编辑' : '新建' }}分类</h1>\n      <el-select v-model=\"model.parent\" placeholder=\"请选择\">\n        <el-option label=\"无上级分类\" value=\"\" :disabled=\"id && !editFlag\"></el-option>\n        <el-option\n          v-for=\"item in level\"\n          :key=\"item._id\"\n          :label=\"item.name\"\n          :value=\"item._id\"\n          :disabled=\"id && editFlag\"\n        >\n        </el-option>\n      </el-select>\n      <el-input\n        v-model=\"model.name\"\n        placeholder=\"请输入分类名称\"\n        @keydown.native.enter=\"save\"\n      ></el-input>\n      <div class=\"save\">\n        <el-button type=\"primary\" @click=\"save\">保存</el-button>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { saveCate, updateCate, fetchCateOne, fetchCateItem } from '@/api/system'\nexport default {\n  name: 'CateEdit',\n  props: ['id'],\n  data() {\n    return {\n      model: {\n        // 分类的名字和父级\n        name: '',\n        parent: '',\n      },\n      level: [], // 一级分类数据\n      editFlag: true, // 标记要编辑的分类是一级还是二级, true为一级\n    }\n  },\n  watch: {\n    $route() {\n      if (this.id) {\n        this.fetchItem()\n      } else {\n        this.model.name = ''\n        this.model.parent = ''\n      }\n    },\n  },\n  mounted() {\n    this.fetchOne()\n    this.id && this.fetchItem()\n  },\n  methods: {\n    // 保存分类\n    async save() {\n      const { name, parent } = this.model\n      const id = this.id\n      // 名字不能为空\n      if (!name) {\n        this.$message.error('分类名称不能为空')\n        return\n      }\n      //根据id判断是新建还是编辑\n      let res\n      if (id) {\n        res = await updateCate({ id, name, parent })\n      } else {\n        res = await saveCate({ name, parent })\n      }\n      // 分类已存在\n      if (res.status == 1) {\n        this.$message.error(res.msg)\n        return\n      }\n      this.$message.success(res.msg)\n      this.$router.push('/system/cateList')\n    },\n\n    // 查询一级分类\n    async fetchOne() {\n      const res = await fetchCateOne()\n      this.level = res.data\n    },\n\n    // 查询要编辑的分类信息\n    async fetchItem() {\n      const res = await fetchCateItem({ id: this.id })\n      this.model.name = res.data.name\n      this.model.parent = res.data.parent ? res.data.parent : ''\n      this.editFlag = res.data.parent ? false : true\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n@import '../../assets/stylus/variable.styl';\n\n#cate-edit {\n  .box-card {\n    width: 520px;\n    box-shadow: none;\n\n    .title, .el-select, .el-input {\n      margin-bottom: 30px;\n    }\n\n    .title {\n      font-size: $font-s;\n    }\n\n    .el-input {\n      width: 70%;\n    }\n  }\n}\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CateEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CateEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CateEdit.vue?vue&type=template&id=478731bf&scoped=true&\"\nimport script from \"./CateEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./CateEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CateEdit.vue?vue&type=style&index=0&id=478731bf&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"478731bf\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}