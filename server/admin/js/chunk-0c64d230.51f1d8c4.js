(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c64d230"],{"085e":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"user-edit"}},[t("el-card",{staticClass:"box-card"},[t("h1",{staticClass:"title"},[e._v(e._s(e.id?"编辑":"新建")+"管理员")]),t("el-input",{attrs:{placeholder:"请输入邮箱"},nativeOn:{keydown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.save(a)}},model:{value:e.model.email,callback:function(a){e.$set(e.model,"email",a)},expression:"model.email"}}),t("el-input",{attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keydown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.save(a)}},model:{value:e.model.password,callback:function(a){e.$set(e.model,"password",a)},expression:"model.password"}}),t("el-input",{attrs:{type:"text",placeholder:"请输入名字"},model:{value:e.model.name,callback:function(a){e.$set(e.model,"name",a)},expression:"model.name"}}),t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,headers:e.uploadHeaders,"on-success":e.onSuccess}},[e.model.avatar?t("img",{staticClass:"avatar",attrs:{src:e.model.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("div",{staticClass:"save"},[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},n=[],s=(t("b0c0"),t("96cf"),t("1da1")),o=t("ef80"),i=t("6db7"),c={name:"UserEdit",mixins:[i["a"]],props:["id"],data:function(){return{model:{email:"",password:"",name:"",avatar:""}}},watch:{$route:function(){this.id?this.getUserItem():(this.model.email="",this.model.password="",this.model.name="",this.model.avatar="")}},mounted:function(){this.id&&this.getUserItem()},methods:{save:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t,r,n,s,i,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=e.model,r=t.email,n=t.password,s=t.name,i=t.avatar,c=e.id,r){a.next=5;break}return e.$message.error("邮箱不能为空"),a.abrupt("return");case 5:if(n){a.next=8;break}return e.$message.error("密码不能为空"),a.abrupt("return");case 8:if(s){a.next=11;break}return e.$message.error("名字不能为空"),a.abrupt("return");case 11:if(i){a.next=14;break}return e.$message.error("请上传头像"),a.abrupt("return");case 14:if(!c){a.next=20;break}return a.next=17,Object(o["g"])({id:c,email:r,password:n,name:s,avatar:i});case 17:u=a.sent,a.next=23;break;case 20:return a.next=22,Object(o["f"])({email:r,password:n,name:s,avatar:i});case 22:u=a.sent;case 23:if(1!=u.status){a.next=26;break}return e.$message.error(u.msg),a.abrupt("return");case 26:e.$message.success(u.msg),e.$router.push("/system/userList");case 28:case"end":return a.stop()}}),a)})))()},getUserItem:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(o["c"])({id:e.id});case 3:t=a.sent,a.next=12;break;case 6:a.prev=6,a.t0=a["catch"](0),e.model.email="user-find-error",e.model.password="",e.model.name="",e.model.avatar="";case 12:e.model.email=t.data.email,e.model.password="",e.model.name=t.data.name,e.model.avatar=t.data.avatar;case 16:case"end":return a.stop()}}),a,null,[[0,6]])})))()},onSuccess:function(e){this.model.avatar=e.data.url}}},u=c,l=(t("aab9"),t("2877")),d=Object(l["a"])(u,r,n,!1,null,"034c42e1",null);a["default"]=d.exports},"3c86":function(e,a,t){},"6db7":function(e,a,t){"use strict";a["a"]={computed:{uploadUrl:function(){return Object({NODE_ENV:"production",BASE_URL:"/admin/"}).VUE_APP_BASE_API?Object({NODE_ENV:"production",BASE_URL:"/admin/"}).VUE_APP_BASE_API+"/upload/images":"/admin/upload/images"},uploadHeaders:function(){return{Authorization:localStorage.getItem("token")||""}}},methods:{uploadSuccess:function(e){this.model.icon=e.data.url}}}},aab9:function(e,a,t){"use strict";var r=t("3c86"),n=t.n(r);n.a},b0c0:function(e,a,t){var r=t("83ab"),n=t("9bf2").f,s=Function.prototype,o=s.toString,i=/^\s*function ([^ (]*)/,c="name";r&&!(c in s)&&n(s,c,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-0c64d230.51f1d8c4.js.map