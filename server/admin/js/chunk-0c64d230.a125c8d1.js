(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c64d230"],{"085e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"user-edit"}},[a("el-card",{staticClass:"box-card"},[a("h1",{staticClass:"title"},[e._v(e._s(e.id?"编辑":"新建")+"管理员")]),a("el-input",{attrs:{placeholder:"请输入邮箱"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)}},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}}),a("el-input",{attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)}},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}}),a("el-input",{attrs:{type:"text",placeholder:"请输入名字"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}}),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,headers:e.uploadHeaders,"on-success":e.onSuccess}},[e.model.avatar?a("img",{staticClass:"avatar",attrs:{src:e.model.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("div",{staticClass:"save"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},n=[],s=(a("b0c0"),a("96cf"),a("1da1")),o=a("ef80"),i=a("6db7"),c={name:"UserEdit",mixins:[i["a"]],props:["id"],data:function(){return{model:{email:"",password:"",name:"",avatar:""}}},watch:{$route:function(){this.id?this.getUserItem():(this.model.email="",this.model.password="",this.model.name="",this.model.avatar="")}},mounted:function(){this.id&&this.getUserItem()},methods:{save:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,i,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.model,r=a.email,n=a.password,s=a.name,i=a.avatar,c=e.id,r){t.next=5;break}return e.$message.error("邮箱不能为空"),t.abrupt("return");case 5:if(n){t.next=8;break}return e.$message.error("密码不能为空"),t.abrupt("return");case 8:if(s){t.next=11;break}return e.$message.error("名字不能为空"),t.abrupt("return");case 11:if(i){t.next=14;break}return e.$message.error("请上传头像"),t.abrupt("return");case 14:if(!c){t.next=20;break}return t.next=17,Object(o["g"])({id:c,email:r,password:n,name:s,avatar:i});case 17:u=t.sent,t.next=23;break;case 20:return t.next=22,Object(o["f"])({email:r,password:n,name:s,avatar:i});case 22:u=t.sent;case 23:if(1!=u.status){t.next=26;break}return e.$message.error(u.msg),t.abrupt("return");case 26:e.$message.success(u.msg),e.$router.push("/system/userList");case 28:case"end":return t.stop()}}),t)})))()},getUserItem:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o["c"])({id:e.id});case 3:a=t.sent,t.next=12;break;case 6:t.prev=6,t.t0=t["catch"](0),e.model.email="user-find-error",e.model.password="",e.model.name="",e.model.avatar="";case 12:e.model.email=a.data.email,e.model.password="",e.model.name=a.data.name,e.model.avatar=a.data.avatar;case 16:case"end":return t.stop()}}),t,null,[[0,6]])})))()},onSuccess:function(e){this.model.avatar=e.data.url}}},u=c,l=(a("aab9"),a("2877")),d=Object(l["a"])(u,r,n,!1,null,"034c42e1",null);t["default"]=d.exports},"3c86":function(e,t,a){},"6db7":function(e,t,a){"use strict";t["a"]={computed:{uploadUrl:function(){return"http://test.moba.ltd/admin/upload/images"},uploadHeaders:function(){return{Authorization:localStorage.getItem("token")||""}}},methods:{uploadSuccess:function(e){this.model.icon=e.data.url}}}},aab9:function(e,t,a){"use strict";var r=a("3c86"),n=a.n(r);n.a},b0c0:function(e,t,a){var r=a("83ab"),n=a("9bf2").f,s=Function.prototype,o=s.toString,i=/^\s*function ([^ (]*)/,c="name";r&&!(c in s)&&n(s,c,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-0c64d230.a125c8d1.js.map