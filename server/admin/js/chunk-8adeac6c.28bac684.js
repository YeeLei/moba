(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8adeac6c"],{"6d25":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"equip-edit"}},[n("el-card",{staticClass:"box-card"},[n("h1",{staticClass:"title"},[t._v(t._s(t.id?"编辑":"新建")+"装备")]),n("el-input",{attrs:{placeholder:"请输入装备名称"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}},model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}}),n("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,"show-file-list":!1,headers:t.uploadHeaders,"on-success":t.uploadSuccess}},[t.model.icon?n("img",{staticClass:"avatar",attrs:{src:t.model.icon}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),n("div",{staticClass:"save"},[n("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},a=[],u=(n("b0c0"),n("96cf"),n("1da1")),i=n("c40e"),o=n("6db7"),c={name:"EquipEdit",mixins:[o["a"]],props:["id"],data:function(){return{model:{name:"",icon:""}}},watch:{$route:function(){this.id?this.getEquipItem():(this.model.name="",this.model.icon="")}},mounted:function(){this.id&&this.getEquipItem()},methods:{save:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,r,a,u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.model,r=n.name,a=n.icon,u=t.id,r){e.next=5;break}return t.$message.error("装备名称不能为空"),e.abrupt("return");case 5:if(a){e.next=8;break}return t.$message.error("请先上传装备图片"),e.abrupt("return");case 8:if(!u){e.next=14;break}return e.next=11,Object(i["j"])({id:u,name:r,icon:a});case 11:o=e.sent,e.next=17;break;case 14:return e.next=16,Object(i["h"])({name:r,icon:a});case 16:o=e.sent;case 17:if(1!=o.status){e.next=20;break}return t.$message.error(o.msg),e.abrupt("return");case 20:t.$message.success(o.msg),t.$router.push("/goods/equipList");case 22:case"end":return e.stop()}}),e)})))()},getEquipItem:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["f"])({id:t.id});case 2:n=e.sent,t.model.name=n.data.name,t.model.icon=n.data.icon;case 5:case"end":return e.stop()}}),e)})))()}}},s=c,d=(n("b6c6"),n("2877")),l=Object(d["a"])(s,r,a,!1,null,"0f7241b1",null);e["default"]=l.exports},"6db7":function(t,e,n){"use strict";e["a"]={computed:{uploadUrl:function(){return"http://test.moba.ltd/admin/upload/images"},uploadHeaders:function(){return{Authorization:localStorage.getItem("token")||""}}},methods:{uploadSuccess:function(t){this.model.icon=t.data.url}}}},b0c0:function(t,e,n){var r=n("83ab"),a=n("9bf2").f,u=Function.prototype,i=u.toString,o=/^\s*function ([^ (]*)/,c="name";r&&!(c in u)&&a(u,c,{configurable:!0,get:function(){try{return i.call(this).match(o)[1]}catch(t){return""}}})},b6c6:function(t,e,n){"use strict";var r=n("fb6b"),a=n.n(r);a.a},c40e:function(t,e,n){"use strict";n.d(e,"h",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"j",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"i",(function(){return d})),n.d(e,"b",(function(){return l})),n.d(e,"k",(function(){return m})),n.d(e,"g",(function(){return p})),n.d(e,"c",(function(){return f}));var r=n("b775");function a(t){return Object(r["a"])({url:"/equip/add",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/equip/delete",method:"delete",params:t})}function i(t){return Object(r["a"])({url:"/equip/update",method:"put",data:t})}function o(t){return Object(r["a"])({url:"/equip/list",method:"get",params:t})}function c(t){return Object(r["a"])({url:"/equip/item",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/store/cate",method:"get",params:t})}function d(t){return Object(r["a"])({url:"/store/add",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/store/delete",method:"delete",params:t})}function m(t){return Object(r["a"])({url:"/store/update",method:"put",data:t})}function p(t){return Object(r["a"])({url:"/store/list",method:"get",params:t})}function f(t){return Object(r["a"])({url:"/store/item",method:"get",params:t})}},fb6b:function(t,e,n){}}]);
//# sourceMappingURL=chunk-8adeac6c.28bac684.js.map