{"version":3,"sources":["webpack:///./node_modules/core-js/internals/array-method-has-species-support.js","webpack:///./src/views/system/AdsEdit.vue?7cea","webpack:///./node_modules/core-js/internals/array-species-create.js","webpack:///./src/assets/javascript/mixins_upload.js","webpack:///./node_modules/core-js/internals/create-property.js","webpack:///./src/api/system.js","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/core-js/internals/array-method-uses-to-length.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/system/AdsEdit.vue?a1fa","webpack:///src/views/system/AdsEdit.vue","webpack:///./src/views/system/AdsEdit.vue?a6f8","webpack:///./src/views/system/AdsEdit.vue","webpack:///./node_modules/core-js/internals/is-array.js"],"names":["fails","wellKnownSymbol","V8_VERSION","SPECIES","module","exports","METHOD_NAME","array","constructor","foo","Boolean","isObject","isArray","originalArray","length","C","Array","prototype","undefined","computed","uploadUrl","process","uploadHeaders","localStorage","getItem","methods","uploadSuccess","res","this","model","icon","data","url","beforeUpload","file","isJPG","type","isLt5M","size","$message","error","toPrimitive","definePropertyModule","createPropertyDescriptor","object","key","value","propertyKey","f","saveCate","request","method","updateCate","deleteCate","params","fetchCateOne","fetchCateTwo","fetchCateItem","saveAds","updateAds","deleteAds","fetchAds","fetchAdsItem","$","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","actualStart","argumentsLength","arguments","TypeError","DESCRIPTORS","has","defineProperty","Object","cache","thrower","it","options","argument0","argument1","enumerable","get","call","FunctionPrototype","Function","FunctionPrototypeToString","toString","nameRE","NAME","configurable","match","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_v","_s","id","nativeOn","$event","indexOf","_k","keyCode","save","callback","$$v","$set","expression","staticStyle","on","addAd","_l","item","index","uploadAds","image","uploadAdsIndex","delAd","staticRenderFns","name","mixins","mixins_upload","props","items","watch","$route","mounted","push","$confirm","confirmButtonText","cancelButtonText","component","classof","arg"],"mappings":"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","file":"js/chunk-8140dd9e.3aa473d9.js","sourcesContent":["var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdsEdit.vue?vue&type=style&index=0&id=2b5dd8da&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdsEdit.vue?vue&type=style&index=0&id=2b5dd8da&lang=stylus&scoped=true&\"","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","export default {\n  computed: {\n    // 文件上传地址\n    uploadUrl() {\n      return process.env.VUE_APP_BASE_API ?\n        process.env.VUE_APP_BASE_API + '/upload/images' : '/admin/upload/images'\n    },\n    // 文件上传时的请求头\n    uploadHeaders() {\n      return { 'Authorization': localStorage.getItem('token') || '' }\n    }\n  },\n  methods: {\n    // 文件上传成功的回调函数\n    uploadSuccess(res) {\n      this.model.icon = res.data.url\n    },\n    // 文件上传之前的回调函数\n    beforeUpload(file) {\n      const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n      const isLt5M = file.size / 1024 / 1024 < 5;\n\n      if (!isJPG) {\n        this.$message.error('上传图片只能是 JPG或PNG 格式!');\n      }\n      if (!isLt5M) {\n        this.$message.error('上传图片大小不能超过 5MB!');\n      }\n      return isJPG && isLt5M;\n    }\n  }\n}","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","import request from '@/utils/request'\n\n// 添加分类\nexport function saveCate (data) {\n  return request({\n    url: '/categories/add',\n    method: 'post',\n    data\n  })\n}\n\n// 修改分类\nexport function updateCate (data) {\n  return request({\n    url: '/categories/update',\n    method: 'put',\n    data\n  })\n}\n\n// 删除分类\nexport function deleteCate (params) {\n  return request({\n    url: '/categories/delete',\n    method: 'delete',\n    params\n  })\n}\n\n// 查询一级分类\nexport function fetchCateOne (params) {\n  return request({\n    url: '/categories/levelOne',\n    method: 'get',\n    params\n  })\n}\n\n// 查询二级分类\nexport function fetchCateTwo (params) {\n  return request({\n    url: '/categories/levelTwo',\n    method: 'get',\n    params\n  })\n}\n\n// 查询要编辑的分类信息\nexport function fetchCateItem (params) {\n  return request({\n    url: '/categories/item',\n    method: 'get',\n    params\n  })\n}\n\n// ----添加广告位----\nexport function saveAds (data) {\n  return request({\n    url: '/ads/add',\n    method: 'post',\n    data\n  })\n}\n\n// 修改广告位\nexport function updateAds (data) {\n  return request({\n    url: '/ads/update',\n    method: 'put',\n    data\n  })\n}\n\n// 删除广告位\nexport function deleteAds (params) {\n  return request({\n    url: '/ads/delete',\n    method: 'delete',\n    params\n  })\n}\n\n// 获取广告位列表\nexport function fetchAds (params) {\n  return request({\n    url: '/ads/list',\n    method: 'get',\n    params\n  })  \n}\n\n// 查询要编辑的广告位信息\nexport function fetchAdsItem (params) {\n  return request({\n    url: '/ads/item',\n    method: 'get',\n    params\n  })\n}\n\n","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\n\nvar defineProperty = Object.defineProperty;\nvar cache = {};\n\nvar thrower = function (it) { throw it; };\n\nmodule.exports = function (METHOD_NAME, options) {\n  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];\n  if (!options) options = {};\n  var method = [][METHOD_NAME];\n  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n  var argument0 = has(options, 0) ? options[0] : thrower;\n  var argument1 = has(options, 1) ? options[1] : undefined;\n\n  return cache[METHOD_NAME] = !!method && !fails(function () {\n    if (ACCESSORS && !DESCRIPTORS) return true;\n    var O = { length: -1 };\n\n    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });\n    else O[1] = 1;\n\n    method.call(O, argument0, argument1);\n  });\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"ads-edit\"}},[_c('el-form',{attrs:{\"label-position\":\"right\",\"label-width\":\"80px\"}},[_c('el-card',{staticClass:\"box-card\"},[_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.id ? '编辑' : '新建')+\"广告位\")]),_c('el-input',{attrs:{\"placeholder\":\"请输入广告位名称\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save($event)}},model:{value:(_vm.model.name),callback:function ($$v) {_vm.$set(_vm.model, \"name\", $$v)},expression:\"model.name\"}}),_c('el-button',{staticStyle:{\"margin-left\":\"119px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.addAd}},[_c('i',{staticClass:\"el-icon-plus\",staticStyle:{\"margin-right\":\"5px\"}}),_vm._v(\"添加广告项 \")]),_c('el-row',_vm._l((_vm.model.items),function(item,index){return _c('el-col',{key:index,staticStyle:{\"margin-top\":\"30px\"},attrs:{\"md\":24}},[_c('el-form-item',{attrs:{\"label\":\"链接(url)\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入图片跳转链接\"},model:{value:(item.url),callback:function ($$v) {_vm.$set(item, \"url\", $$v)},expression:\"item.url\"}})],1),_c('el-form-item',{attrs:{\"label\":\"广告图\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"show-file-list\":false,\"headers\":_vm.uploadHeaders,\"on-success\":_vm.uploadAds,\"before-upload\":_vm.beforeUpload}},[(item.image)?_c('img',{staticClass:\"banner\",attrs:{\"src\":item.image},on:{\"click\":function($event){_vm.uploadAdsIndex = index}}}):_c('i',{staticClass:\"el-icon-plus banner-uploader-icon\",on:{\"click\":function($event){_vm.uploadAdsIndex = index}}})])],1),_c('el-form-item',{staticStyle:{\"text-align\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.delAd(index)}}},[_vm._v(\"删除\")])],1)],1)}),1)],1)],1),_c('div',{staticClass:\"save\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"ads-edit\">\n    <el-form label-position=\"right\" label-width=\"80px\">\n      <el-card class=\"box-card\">\n        <h1 class=\"title\">{{ id ? '编辑' : '新建' }}广告位</h1>\n        <el-input\n          v-model=\"model.name\"\n          placeholder=\"请输入广告位名称\"\n          @keydown.native.enter=\"save\"\n        ></el-input>\n        <el-button type=\"primary\" size=\"small\" @click=\"addAd\" style=\"margin-left: 119px\">\n          <i class=\"el-icon-plus\" style=\"margin-right: 5px\"></i>添加广告项\n        </el-button>\n        <el-row>\n          <el-col\n            :md=\"24\"\n            v-for=\"(item, index) in model.items\"\n            :key=\"index\"\n            style=\"margin-top: 30px\"\n          >\n            <el-form-item label=\"链接(url)\">\n              <el-input v-model=\"item.url\" placeholder=\"请输入图片跳转链接\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"广告图\">\n              <el-upload\n                class=\"avatar-uploader\"\n                :action=\"uploadUrl\"\n                :show-file-list=\"false\"\n                :headers=\"uploadHeaders\"\n                :on-success=\"uploadAds\"\n                :before-upload=\"beforeUpload\"\n              >\n                <img\n                  v-if=\"item.image\"\n                  :src=\"item.image\"\n                  class=\"banner\"\n                  @click=\"uploadAdsIndex = index\"\n                />\n                <i\n                  v-else\n                  class=\"el-icon-plus banner-uploader-icon\"\n                  @click=\"uploadAdsIndex = index\"\n                ></i>\n              </el-upload>\n            </el-form-item>\n            <el-form-item style=\"text-align: right\">\n              <el-button type=\"danger\" size=\"small\" @click=\"delAd(index)\">删除</el-button>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-card>\n    </el-form>\n    <div class=\"save\">\n      <el-button type=\"primary\" @click=\"save\">保存</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { fetchAdsItem, updateAds, saveAds } from '@/api/system'\nimport mixins_upload from '@/assets/javascript/mixins_upload'\n\nexport default {\n  name: 'AdsEdit',\n  mixins: [mixins_upload],\n  props: ['id'],\n  data() {\n    return {\n      model: {\n        name: '',\n        items: [],\n      },\n      uploadAdsIndex: 0, // 用来标记上传的是哪个广告项的图片\n    }\n  },\n  watch: {\n    $route() {\n      if (this.id) {\n        this.fetchAdsItem()\n      } else {\n        this.model.name = ''\n        this.model.items = []\n      }\n    },\n  },\n  mounted() {\n    this.id && this.fetchAdsItem()\n  },\n  methods: {\n    // 保存广告位\n    async save() {\n      const { name, items } = this.model\n      const id = this.id\n      // 名字不能为空\n      if (!name) {\n        this.$message.error('广告位名称不能为空')\n        return\n      }\n      //根据id判断是新建还是编辑\n      let res\n      if (id) {\n        res = await updateAds({ id, name, items })\n      } else {\n        res = await saveAds({ name, items })\n      }\n      // 该广告位已存在\n      if (res.status == 1) {\n        this.$message.error(res.msg)\n        return\n      }\n      this.$message.success(res.msg)\n      this.$router.push('/system/adsList')\n    },\n    // 获取广告位信息\n    async fetchAdsItem() {\n      const res = await fetchAdsItem({ id: this.id })\n      this.model.name = res.data.name\n      this.model.items = res.data.items\n    },\n    // 添加一个广告项\n    addAd() {\n      this.model.items.push({\n        image: '',\n        url: '',\n      })\n    },\n    // 删除一个广告项\n    delAd(index) {\n      this.$confirm(`确认要删除该广告项?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      }).then(() => {\n        // 先前端删除数据，点保存时再提交\n        this.model.items.splice(index, 1)\n        this.$message.success('删除成功')\n      })\n    },\n    // 文件上传成功的回调函数\n    uploadAds(res) {\n      this.model.items[this.uploadAdsIndex].image = res.data.url\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n@import '../../assets/stylus/variable.styl';\n\n#ads-edit {\n  .box-card {\n    width: 800px;\n    margin: 0 auto;\n    box-shadow: none;\n\n    .title, .el-input {\n      margin-bottom: 30px;\n    }\n\n    .title {\n      font-size: $font-s;\n    }\n\n    .el-input {\n      width: 70%;\n    }\n\n    .save {\n      margin-top: 30px;\n    }\n  }\n\n  .el-form-item {\n    .el-input {\n      margin-bottom: 0;\n      width: 100%;\n    }\n  }\n\n  .save {\n    width: 800px;\n    margin: 50px auto;\n    margin-top: 30px;\n    text-align: right;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdsEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdsEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdsEdit.vue?vue&type=template&id=2b5dd8da&scoped=true&\"\nimport script from \"./AdsEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./AdsEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdsEdit.vue?vue&type=style&index=0&id=2b5dd8da&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b5dd8da\",\n  null\n  \n)\n\nexport default component.exports","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n"],"sourceRoot":""}