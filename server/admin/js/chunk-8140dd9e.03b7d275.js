(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8140dd9e"],{"1dde":function(e,t,n){var r=n("d039"),a=n("b622"),i=n("2d00"),o=a("species");e.exports=function(e){return i>=51||!r((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"5be4":function(e,t,n){"use strict";var r=n("78b1"),a=n.n(r);a.a},"65f0":function(e,t,n){var r=n("861d"),a=n("e8b5"),i=n("b622"),o=i("species");e.exports=function(e,t){var n;return a(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?r(n)&&(n=n[o],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},"6db7":function(e,t,n){"use strict";t["a"]={computed:{uploadUrl:function(){return"http://test.moba.ltd/admin/upload/images"},uploadHeaders:function(){return{Authorization:localStorage.getItem("token")||""}}},methods:{uploadSuccess:function(e){this.model.icon=e.data.url},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,n=e.size/1024/1024<5;return t||this.$message.error("上传图片只能是 JPG或PNG 格式!"),n||this.$message.error("上传图片大小不能超过 5MB!"),t&&n}}}},"78b1":function(e,t,n){},8418:function(e,t,n){"use strict";var r=n("c04e"),a=n("9bf2"),i=n("5c6c");e.exports=function(e,t,n){var o=r(t);o in e?a.f(e,o,i(0,n)):e[o]=n}},8593:function(e,t,n){"use strict";n.d(t,"i",(function(){return a})),n.d(t,"k",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"j",(function(){return l})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p}));var r=n("b775");function a(e){return Object(r["a"])({url:"/categories/add",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/categories/update",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/categories/delete",method:"delete",params:e})}function s(e){return Object(r["a"])({url:"/categories/levelOne",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/categories/levelTwo",method:"get",params:e})}function c(e){return Object(r["a"])({url:"/categories/item",method:"get",params:e})}function d(e){return Object(r["a"])({url:"/ads/add",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/ads/update",method:"put",data:e})}function m(e){return Object(r["a"])({url:"/ads/delete",method:"delete",params:e})}function f(e){return Object(r["a"])({url:"/ads/list",method:"get",params:e})}function p(e){return Object(r["a"])({url:"/ads/item",method:"get",params:e})}},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),o=n("50c4"),s=n("7b0b"),u=n("65f0"),c=n("8418"),d=n("1dde"),l=n("ae40"),m=d("splice"),f=l("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!m||!f},{splice:function(e,t){var n,r,d,l,m,f,v=s(this),x=o(v.length),y=a(e,x),k=arguments.length;if(0===k?n=r=0:1===k?(n=0,r=x-y):(n=k-2,r=h(p(i(t),0),x-y)),x+n-r>b)throw TypeError(g);for(d=u(v,r),l=0;l<r;l++)m=y+l,m in v&&c(d,l,v[m]);if(d.length=r,n<r){for(l=y;l<x-r;l++)m=l+r,f=l+n,m in v?v[f]=v[m]:delete v[f];for(l=x;l>x-r+n;l--)delete v[l-1]}else if(n>r)for(l=x-r;l>y;l--)m=l+r-1,f=l+n-1,m in v?v[f]=v[m]:delete v[f];for(l=0;l<n;l++)v[l+y]=arguments[l+2];return v.length=x-r+n,d}})},ae40:function(e,t,n){var r=n("83ab"),a=n("d039"),i=n("5135"),o=Object.defineProperty,s={},u=function(e){throw e};e.exports=function(e,t){if(i(s,e))return s[e];t||(t={});var n=[][e],c=!!i(t,"ACCESSORS")&&t.ACCESSORS,d=i(t,0)?t[0]:u,l=i(t,1)?t[1]:void 0;return s[e]=!!n&&!a((function(){if(c&&!r)return!0;var e={length:-1};c?o(e,1,{enumerable:!0,get:u}):e[1]=1,n.call(e,d,l)}))}},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,i=Function.prototype,o=i.toString,s=/^\s*function ([^ (]*)/,u="name";r&&!(u in i)&&a(i,u,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(e){return""}}})},c924:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"ads-edit"}},[n("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[n("el-card",{staticClass:"box-card"},[n("h1",{staticClass:"title"},[e._v(e._s(e.id?"编辑":"新建")+"广告位")]),n("el-input",{attrs:{placeholder:"请输入广告位名称"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)}},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}}),n("el-button",{staticStyle:{"margin-left":"119px"},attrs:{type:"primary",size:"small"},on:{click:e.addAd}},[n("i",{staticClass:"el-icon-plus",staticStyle:{"margin-right":"5px"}}),e._v("添加广告项 ")]),n("el-row",e._l(e.model.items,(function(t,r){return n("el-col",{key:r,staticStyle:{"margin-top":"30px"},attrs:{md:24}},[n("el-form-item",{attrs:{label:"链接(url)"}},[n("el-input",{attrs:{placeholder:"请输入图片跳转链接"},model:{value:t.url,callback:function(n){e.$set(t,"url",n)},expression:"item.url"}})],1),n("el-form-item",{attrs:{label:"广告图"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,headers:e.uploadHeaders,"on-success":e.uploadAds,"before-upload":e.beforeUpload}},[t.image?n("img",{staticClass:"banner",attrs:{src:t.image},on:{click:function(t){e.uploadAdsIndex=r}}}):n("i",{staticClass:"el-icon-plus banner-uploader-icon",on:{click:function(t){e.uploadAdsIndex=r}}})])],1),n("el-form-item",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.delAd(r)}}},[e._v("删除")])],1)],1)})),1)],1)],1),n("div",{staticClass:"save"},[n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)},a=[],i=(n("a434"),n("b0c0"),n("96cf"),n("1da1")),o=n("8593"),s=n("6db7"),u={name:"AdsEdit",mixins:[s["a"]],props:["id"],data:function(){return{model:{name:"",items:[]},uploadAdsIndex:0}},watch:{$route:function(){this.id?this.fetchAdsItem():(this.model.name="",this.model.items=[])}},mounted:function(){this.id&&this.fetchAdsItem()},methods:{save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.model,r=n.name,a=n.items,i=e.id,r){t.next=5;break}return e.$message.error("广告位名称不能为空"),t.abrupt("return");case 5:if(!i){t.next=11;break}return t.next=8,Object(o["j"])({id:i,name:r,items:a});case 8:s=t.sent,t.next=14;break;case 11:return t.next=13,Object(o["h"])({name:r,items:a});case 13:s=t.sent;case 14:if(1!=s.status){t.next=17;break}return e.$message.error(s.msg),t.abrupt("return");case 17:e.$message.success(s.msg),e.$router.push("/system/adsList");case 19:case"end":return t.stop()}}),t)})))()},fetchAdsItem:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["d"])({id:e.id});case 2:n=t.sent,e.model.name=n.data.name,e.model.items=n.data.items;case 5:case"end":return t.stop()}}),t)})))()},addAd:function(){this.model.items.push({image:"",url:""})},delAd:function(e){var t=this;this.$confirm("确认要删除该广告项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.model.items.splice(e,1),t.$message.success("删除成功")}))},uploadAds:function(e){this.model.items[this.uploadAdsIndex].image=e.data.url}}},c=u,d=(n("5be4"),n("2877")),l=Object(d["a"])(c,r,a,!1,null,"2b5dd8da",null);t["default"]=l.exports},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}}}]);
//# sourceMappingURL=chunk-8140dd9e.03b7d275.js.map